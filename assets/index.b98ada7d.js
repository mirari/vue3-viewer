var t=Object.defineProperty,e=Object.defineProperties,o=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(e,o,n)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,l=(t,e)=>{for(var o in e||(e={}))s.call(e,o)&&a(t,o,e[o]);if(n)for(var o of n(e))i.call(e,o)&&a(t,o,e[o]);return t},r=(t,n)=>e(t,o(n));import{h as c,r as u,V as d,d as p,w as b,n as m,a as v,b as f,o as h,c as g,e as w,f as y,g as k,i as x,j as C,t as O,k as _,l as I,F as z,m as $,p as j,q as T,s as V,u as E,v as D,x as M,y as U,z as R,A,B as S,C as P}from"./vendor.8a4769d8.js";const L="undefined"!=typeof window&&null!==window;!function(){if(L&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)return"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get(){return this.intersectionRatio>0}}),!0}();const X=Object.prototype.propertyIsEnumerable,Y=Object.getOwnPropertySymbols;function H(t){return"function"==typeof t||"[object Object]"===toString.call(t)}function F(t){return"__proto__"!==t&&"constructor"!==t&&"prototype"!==t}function G(t,...e){if(!H(t))throw new TypeError("expected the first argument to be an object");if(0===e.length||"function"!=typeof Symbol||"function"!=typeof Y)return t;for(const o of e){const e=Y(o);for(const n of e)X.call(o,n)&&(t[n]=o[n])}return t}function W(t,...e){let o=0;var n;for(("object"==typeof(n=t)?null===n:"function"!=typeof n)&&(t=e[o++]),t||(t={});o<e.length;o++)if(H(e[o])){for(const n of Object.keys(e[o]))F(n)&&(H(t[n])&&H(e[o][n])?W(t[n],e[o][n]):t[n]=e[o][n]);G(t,e[o])}return t}const Z=({images:t=[],options:e})=>{e=W(e,{inline:!1});const o=document.createElement("div"),n=c("div",{style:{display:"none"},class:["__viewer-token"]},t.map((t=>c("img","string"==typeof t?{src:t}:t))));u(n,o);const s=o.firstElementChild;document.body.appendChild(s);const i=new d(s,e),a=i.destroy.bind(i);return i.destroy=function(){return a(),u(null,o),i},i.show(),s.addEventListener("hidden",(function(){this.viewer===i&&i.destroy()})),i},B=({name:t="viewer",debug:e=!1})=>{async function o(e,o,s=!1,a=!1){await m(),a&&!function(t){const e=t.innerHTML.match(/<img([\w\W]+?)[\\/]?>/g),o=e?e.join(""):void 0;return t.__viewerImageDiffCache===o?(i("Element change detected, but image(s) has not changed"),!1):(i("Image change detected"),t.__viewerImageDiffCache=o,!0)}(e)||(s||!e[`$${t}`]?(n(e),e[`$${t}`]=new d(e,o),i("Viewer created")):(e[`$${t}`].update(),i("Viewer updated")))}function n(e){e[`$${t}`]&&(e[`$${t}`].destroy(),delete e[`$${t}`],i("Viewer destroyed"))}function s(t){t.__viewerMutationObserver&&(t.__viewerMutationObserver.disconnect(),delete t.__viewerMutationObserver,i("observer destroyed"))}function i(...t){e&&console.log(...t)}return{mounted(t,e,n){i("Viewer bind");const a=p(o,50);a(t,e.value),function(t,e,o,n){t.__viewerUnwatch=b((()=>e.value),((o,s)=>{i("Change detected by watcher: ",e.value),n(t,o,!0,!1)}),{deep:!0}),i("Watcher created, expression: ",e.value)}(t,e,0,a),e.modifiers.static||function(t,e,o,n){s(t);const a=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(!a)return void i("Observer not supported");const l=new a((s=>{s.forEach((s=>{i(`Viewer mutation:${s.type}`),o(t,e,n,!0)}))}));l.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),t.__viewerMutationObserver=l,i("Observer created")}(t,e.value,a,e.modifiers.rebuild)},unmounted(t){i("Viewer unbind"),s(t),function(t){t.__viewerUnwatch&&(t.__viewerUnwatch(),delete t.__viewerUnwatch,i("Watcher destroyed"))}(t),n(t)}}};var K=v({props:{images:{type:Array,default:()=>[]},rebuild:{type:Boolean,default:!1},trigger:{type:Object,default:null},options:{type:Object,default:()=>null}},emits:["inited"],setup(t,{emit:e}){let o;const n=f();function s(){o=new d(n.value,t.options),e("inited",o)}function i(){o&&o.destroy()}function a(){i(),s()}function l(){o?(o.update(),e("inited",o)):s()}function r(){t.rebuild?a():l()}const c={deep:!0};return b((()=>t.images),(()=>m((()=>r()))),c),b((()=>t.trigger),(()=>m((()=>r()))),c),b((()=>t.options),(()=>m((()=>r()))),c),h((()=>s())),g((()=>i())),{root:n,createViewer:s,rebuildViewer:a,updateViewer:l,destroyViewer:i}}});const q={ref:"root"};K.render=function(t,e,o,n,s,i){return k(),w("div",q,[y(t.$slots,"default",{images:t.images,options:t.options})],512)};var N={install(t,{name:e="viewer",debug:o=!1,defaultOptions:n}={}){n&&d.setDefaults(n),t.config.globalProperties[`$${e}Api`]=Z,t.component(e,x(K,{name:e})),t.directive(e,B({name:e,debug:o}))},setDefaults(t){d.setDefaults(t)}};N.setDefaults({zIndex:2021});class J{constructor(t,e,o){this.source=t,this.thumbnail=e,this.title=o}}const Q=[],tt=Math.floor(60*Math.random())+10;for(let Pe=0;Pe<10;Pe++){const t=new J(`https://picsum.photos/id/${tt+Pe}/1440/900`,`https://picsum.photos/id/${tt+Pe}/346/216`,`Image: ${tt+Pe}`);Q.push(t)}var et=v({name:"DirectiveExample",directives:{viewer:B({debug:!0})},setup(){const t=f(null),e=C({options:{toolbar:!0,url:"data-source"},images:[...Q].splice(0,5)});return r(l({},O(e)),{el:t,add:function(){e.images.push(Q[e.images.length])},remove:function(){e.images.pop()},stop:stop,show:function(){t.value&&t.value.$viewer.show()},toggleToolbar:function(t){e.options.toolbar=t}})}});const ot=j();T("data-v-3757db75");const nt={class:"field is-grouped is-grouped-multiline"},st={class:"control"},it={class:"control"},at={class:"control"},lt={class:"field has-addons"},rt={class:"control"},ct={class:"control"},ut=_("p",null," To show the viewer, you can click these images too. ",-1),dt={ref:"el",class:"images clearfix"};V();const pt=ot(((t,e,o,n,s,i)=>{const a=E("viewer");return k(),w("div",null,[_("div",nt,[_("p",st,[_("button",{type:"button",class:"button",disabled:10===t.images.length,onClick:e[1]||(e[1]=(...e)=>t.add&&t.add(...e))}," Add ",8,["disabled"])]),_("p",it,[_("button",{type:"button",class:"button",disabled:0===t.images.length,onClick:e[2]||(e[2]=(...e)=>t.remove&&t.remove(...e))}," Remove ",8,["disabled"])]),_("p",at,[_("button",{type:"button",class:"button",onClick:e[3]||(e[3]=(...e)=>t.show&&t.show(...e))}," Show ")]),_("div",lt,[_("p",rt,[_("button",{type:"button",class:["button is-primary",{" is-active":t.options.toolbar}],onClick:e[4]||(e[4]=e=>t.toggleToolbar(!0))}," Show Toolbar ",2)]),_("p",ct,[_("button",{type:"button",class:["button is-primary",{" is-active":!t.options.toolbar}],onClick:e[5]||(e[5]=e=>t.toggleToolbar(!1))}," Hide Toolbar ",2)])])]),ut,I(_("div",dt,[(k(!0),w(z,null,$(t.images,(({source:t,thumbnail:e,title:o})=>(k(),w("img",{key:t,class:"image",src:e,"data-source":t,alt:o},null,8,["src","data-source","alt"])))),128))],512),[[a,t.options]])])}));et.render=pt,et.__scopeId="data-v-3757db75",N.setDefaults({zIndexInline:2021});class bt{constructor(t,e,o){this.source=t,this.thumbnail=e,this.title=o}}const mt=[],vt=Math.floor(60*Math.random())+10;for(let Pe=0;Pe<10;Pe++){const t=new bt(`https://picsum.photos/id/${vt+Pe}/1440/900`,`https://picsum.photos/id/${vt+Pe}/346/216`,`Image: ${vt+Pe}`);mt.push(t)}var ft=v({name:"ComponentExample",components:{Viewer:K},setup(){let t;const e=C({form:{view:2,zoom:-.1,zoomTo:.8,rotate:90,rotateTo:180,scaleX:1,scaleY:1},toggleOptions:["button","navbar","title","toolbar","tooltip","movable","zoomable","rotatable","scalable","transition","fullscreen","keyboard"],options:{inline:!0,button:!0,navbar:!0,title:!0,toolbar:!0,tooltip:!0,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!0,fullscreen:!0,keyboard:!0,url:"data-source"},images:[...mt].splice(0,5)});return r(l({},O(e)),{inited:function(e){t=e},add:function(){e.images.push(mt[e.images.length])},remove:function(){e.images.pop()},view:function(){e.form.view>=0&&e.form.view<e.images.length&&t.view(e.form.view)},zoom:function(o){t.zoom(o||e.form.zoom)},zoomTo:function(){t.zoomTo(e.form.zoomTo)},rotate:function(o){t.rotate(o||e.form.rotate)},rotateTo:function(){t.rotateTo(e.form.rotateTo)},scaleX:function(o){o?t.scaleX(o):(e.form.scaleX=-e.form.scaleX,t.scaleX(e.form.scaleX))},scaleY:function(o){o?t.scaleY(o):(e.form.scaleY=-e.form.scaleY,t.scaleY(e.form.scaleY))},move:function(e,o){t.move(e,o)},prev:function(){t.prev()},next:function(){t.next()},play:function(){t.play()},stop:function(){t.stop()},show:function(){t.show()},full:function(){t.full()},tooltip:function(){t.tooltip()},reset:function(){t.reset()},toggleInline:function(t){e.options.inline=t}})}});const ht=j();T("data-v-d3ebfab2");const gt={class:"methods is-flex"},wt={class:"field has-addons"},yt={class:"control"},kt={class:"control"},xt={class:"field has-addons",style:{width:"110px"}},Ct=_("div",{class:"control"},[_("span",{class:"button is-static"},"View")],-1),Ot={class:"control"},_t={class:"field has-addons",style:{width:"140px"}},It={class:"control"},zt={class:"control"},$t={class:"field has-addons",style:{width:"140px"}},jt={class:"control"},Tt={class:"control"},Vt={class:"field has-addons",style:{width:"140px"}},Et={class:"control"},Dt={class:"control"},Mt={class:"field has-addons",style:{width:"160px"}},Ut={class:"control"},Rt={class:"control"},At={class:"field has-addons"},St={class:"control"},Pt={class:"control"},Lt={class:"field has-addons"},Xt={class:"control"},Yt={class:"control"},Ht={class:"field has-addons"},Ft={class:"control"},Gt={class:"control"},Wt={class:"field has-addons"},Zt={class:"control"},Bt={class:"control"},Kt={class:"control"},qt={class:"control"},Nt={class:"field has-addons"},Jt={class:"control"},Qt={class:"control"},te={class:"control"},ee={class:"control"},oe={class:"tile is-ancestor"},ne={class:"tile is-2 is-vertical is-parent"},se={class:"tile is-child"},ie={class:"panel options-panel"},ae=_("p",{class:"panel-heading"}," Options ",-1),le={class:"checkbox"},re={class:"tile is-10 is-vertical is-parent"},ce={class:"viewer-wrapper"},ue={class:"images"},de=_("strong",null,"Options: ",-1);V();const pe=ht(((t,e,o,n,s,i)=>{const a=R("viewer");return k(),w("div",null,[_("div",gt,[_("div",wt,[_("p",yt,[_("button",{type:"button",class:["button is-primary",{" is-active":!t.options.inline}],onClick:e[1]||(e[1]=e=>t.toggleInline(!1))}," Modal ",2)]),_("p",kt,[_("button",{type:"button",class:["button is-primary",{" is-active":t.options.inline}],onClick:e[2]||(e[2]=e=>t.toggleInline(!0))}," Inline ",2)])]),_("button",{type:"button",class:"button",disabled:9===t.images.length,onClick:e[3]||(e[3]=(...e)=>t.add&&t.add(...e))}," Add ",8,["disabled"]),_("button",{type:"button",class:"button",disabled:1===t.images.length,onClick:e[4]||(e[4]=(...e)=>t.remove&&t.remove(...e))}," Remove ",8,["disabled"]),t.options.inline?(k(),w(z,{key:0},[_("div",xt,[Ct,_("div",Ot,[I(_("input",{"onUpdate:modelValue":e[5]||(e[5]=e=>t.form.view=e),class:"input",type:"text",onKeyup:e[6]||(e[6]=(...e)=>t.view&&t.view(...e))},null,544),[[D,t.form.view,void 0,{number:!0}]])])]),_("div",_t,[_("div",It,[I(_("input",{"onUpdate:modelValue":e[7]||(e[7]=e=>t.form.zoom=e),class:"input",type:"text"},null,512),[[D,t.form.zoom,void 0,{number:!0}]])]),_("div",zt,[_("span",{class:"button",onClick:e[8]||(e[8]=e=>t.zoom())},"Zoom")])]),_("div",$t,[_("div",jt,[I(_("input",{"onUpdate:modelValue":e[9]||(e[9]=e=>t.form.zoomTo=e),class:"input",type:"text"},null,512),[[D,t.form.zoomTo,void 0,{number:!0}]])]),_("div",Tt,[_("span",{class:"button",onClick:e[10]||(e[10]=(...e)=>t.zoomTo&&t.zoomTo(...e))},"Zoom to")])]),_("div",Vt,[_("div",Et,[I(_("input",{"onUpdate:modelValue":e[11]||(e[11]=e=>t.form.rotate=e),class:"input",type:"text"},null,512),[[D,t.form.rotate,void 0,{number:!0}]])]),_("div",Dt,[_("span",{class:"button",onClick:e[12]||(e[12]=e=>t.rotate())},"Rotate")])]),_("div",Mt,[_("div",Ut,[I(_("input",{"onUpdate:modelValue":e[13]||(e[13]=e=>t.form.rotateTo=e),class:"input",type:"text"},null,512),[[D,t.form.rotateTo,void 0,{number:!0}]])]),_("div",Rt,[_("span",{class:"button",onClick:e[14]||(e[14]=(...e)=>t.rotateTo&&t.rotateTo(...e))},"Rotate to")])]),_("div",At,[_("div",St,[_("button",{type:"button",class:"button",onClick:e[15]||(e[15]=e=>t.zoom(.5))}," Zoom In ")]),_("div",Pt,[_("button",{type:"button",class:"button",onClick:e[16]||(e[16]=e=>t.zoom(-.5))}," Zoom Out ")])]),_("div",Lt,[_("div",Xt,[_("button",{type:"button",class:"button",onClick:e[17]||(e[17]=e=>t.rotate(-90))}," Rotate Left ")]),_("div",Yt,[_("button",{type:"button",class:"button",onClick:e[18]||(e[18]=e=>t.rotate(90))}," Rotate Right ")])]),_("div",Ht,[_("div",Ft,[_("button",{type:"button",class:"button",onClick:e[19]||(e[19]=e=>t.scaleX())}," Flip Horizontal ")]),_("div",Gt,[_("button",{type:"button",class:"button",onClick:e[20]||(e[20]=e=>t.scaleY())}," Flip Vertical ")])]),_("div",Wt,[_("div",Zt,[_("button",{type:"button",class:"button",onClick:e[21]||(e[21]=e=>t.move(-10,0))}," Left ")]),_("div",Bt,[_("button",{type:"button",class:"button",onClick:e[22]||(e[22]=e=>t.move(10,0))}," Right ")]),_("div",Kt,[_("button",{type:"button",class:"button",onClick:e[23]||(e[23]=e=>t.move(0,-10))}," Up ")]),_("div",qt,[_("button",{type:"button",class:"button",onClick:e[24]||(e[24]=e=>t.move(0,10))}," Down ")])]),_("div",Nt,[_("div",Jt,[_("button",{type:"button",class:"button",onClick:e[25]||(e[25]=(...e)=>t.prev&&t.prev(...e))}," Prev ")]),_("div",Qt,[_("button",{type:"button",class:"button",onClick:e[26]||(e[26]=(...e)=>t.next&&t.next(...e))}," Next ")]),_("div",te,[_("button",{type:"button",class:"button",onClick:e[27]||(e[27]=(...e)=>t.play&&t.play(...e))}," Play ")]),_("div",ee,[_("button",{type:"button",class:"button",onClick:e[28]||(e[28]=(...e)=>t.stop&&t.stop(...e))}," Stop ")])]),_("button",{type:"button",class:"button",onClick:e[29]||(e[29]=(...e)=>t.full&&t.full(...e))}," Full "),_("button",{type:"button",class:"button",onClick:e[30]||(e[30]=(...e)=>t.tooltip&&t.tooltip(...e))}," Tooltip "),_("button",{type:"button",class:"button",onClick:e[31]||(e[31]=(...e)=>t.reset&&t.reset(...e))}," Reset ")],64)):(k(),w("button",{key:1,type:"button",class:"button",onClick:e[32]||(e[32]=(...e)=>t.show&&t.show(...e))}," Show "))]),_("div",oe,[_("div",ne,[_("div",se,[_("nav",ie,[ae,(k(!0),w(z,null,$(t.toggleOptions,(e=>(k(),w("div",{key:e,class:"panel-block"},[_("label",le,[I(_("input",{"onUpdate:modelValue":o=>t.options[e]=o,type:"checkbox",name:"button"},null,8,["onUpdate:modelValue"]),[[A,t.options[e]]]),M(" "+U(e),1)])])))),128))])])]),_("div",re,[_("div",ce,[_(a,{ref:"viewer",options:t.options,images:t.images,rebuild:"",class:"viewer",onInited:t.inited},{default:ht((t=>[_("figure",ue,[(k(!0),w(z,null,$(t.images,(({source:t,thumbnail:e,title:o})=>(k(),w("div",{key:t,class:"image-wrapper"},[_("img",{class:"image",src:e,"data-source":t,alt:o},null,8,["src","data-source","alt"])])))),128))]),_("p",null,[de,M(U(t.options),1)])])),_:1},8,["options","images","onInited"])])])])])}));ft.render=pe,ft.__scopeId="data-v-d3ebfab2",N.setDefaults({zIndex:2021});const be=[],me=[],ve=Math.floor(60*Math.random())+10;for(let Pe=0;Pe<5;Pe++)be.push(`https://picsum.photos/id/${ve+Pe}/1440/900`),me.push({"data-source":`https://picsum.photos/id/${ve+Pe}/1440/900`,src:`https://picsum.photos/id/${ve+Pe}/346/216`,alt:`Image: ${ve+Pe}`});var fe=v({name:"ViewerExample",setup:()=>({previewURL:function(){const t=Z({images:be});console.log(t)},previewImgObject:function(){const t=Z({options:{toolbar:!0,url:"data-source",initialViewIndex:2},images:me});console.log(t)}})});const he=j();T("data-v-6251e2a8");const ge=_("p",null,[M(" Click to show the gallery without rendering the images yourself. "),_("strong",null,"Only available in modal mode.")],-1),we={class:"control"},ye=_("p",null," ['1.png', '2.png'] ",-1),ke={class:"control"},xe=_("p",null," [{'src':'thumbnail.png', 'data-source':'source.png'}, {'src':'thumbnail.png', 'data-source':'source.png'}] ",-1);V();const Ce=he(((t,e,o,n,s,i)=>(k(),w("div",null,[ge,_("div",we,[_("button",{type:"button",class:"button",onClick:e[1]||(e[1]=(...e)=>t.previewURL&&t.previewURL(...e))}," URL Array "),ye]),_("div",ke,[_("button",{type:"button",class:"button",onClick:e[2]||(e[2]=(...e)=>t.previewImgObject&&t.previewImgObject(...e))}," Img-Object Array "),xe])]))));fe.render=Ce,fe.__scopeId="data-v-6251e2a8";var Oe=v({components:{DirectiveExample:et,ComponentExample:ft,ApiExample:fe}});const _e=_("h1",{class:"title"}," Demo ",-1),Ie=_("hr",null,null,-1),ze={style:{"margin-bottom":"3em"}},$e=_("h2",{class:"title is-4"}," Directive ",-1),je=_("p",{class:"subtitle"},[_("a",{href:"https://github.com/mirari/v-viewer/blob/v3/example/views/example/DirectiveExample.vue",target:"_blank"},"Source")],-1),Te={style:{"margin-bottom":"6em"}},Ve=_("h2",{class:"title is-4"}," Component ",-1),Ee=_("p",{class:"subtitle"},[_("a",{href:"https://github.com/mirari/v-viewer/blob/v3/example/views/example/ComponentExample.vue",target:"_blank"},"Source")],-1),De=_("h2",{class:"title is-4"}," Api ",-1),Me=_("p",{class:"subtitle"},[_("a",{href:"https://github.com/mirari/v-viewer/blob/v3/example/views/example/ApiExample.vue",target:"_blank"},"Source")],-1);Oe.render=function(t,e,o,n,s,i){const a=R("directive-example"),l=R("component-example"),r=R("api-example");return k(),w("div",null,[_e,Ie,_("div",ze,[$e,je,_(a)]),_("div",Te,[Ve,Ee,_(l)]),_("div",null,[De,Me,_(r)])])};var Ue=v({name:"App",components:{Example:Oe}});const Re=S('<a class="github-fork-ribbon" href="https://github.com/mirari/v-viewer" title="Fork me on GitHub">Fork me on GitHub</a><section class="hero is-primary" style="margin-bottom:2em;"><div class="hero-body"><div class="container"><div class="columns is-vcentered"><div class="column"><p class="title is-1"> v-viewer </p><p class="subtitle is-4"> Image viewer component for vue, supports rotation, scale, zoom and so on, based on <a href="https://github.com/fengyuanchen/viewerjs" target="_blank">viewer.js</a></p></div></div></div></div></section>',2),Ae={class:"container",style:{"margin-bottom":"30px"}},Se=S('<footer class="footer"><div class="container"><div class="content has-text-centered"><p><a href="http://mirari.cc" target="_blank" title="mirari.cc"><strong>mirari.cc</strong></a> · GitHub <a href="https://github.com/mirari" target="_blank" title="GitHub"> @mirari </a></p></div></div></footer>',1);Ue.render=function(t,e,o,n,s,i){const a=R("example");return k(),w(z,null,[Re,_("div",Ae,[_(a)]),Se],64)};N.setDefaults({zIndexInline:2021,focus:!1});P(Ue).mount("#app");
